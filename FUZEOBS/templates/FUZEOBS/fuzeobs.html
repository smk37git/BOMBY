{% extends 'MAIN/base.html' %}
{% load static %}

{% block title %}FuzeOBS - Intelligent OBS Configuration | BOMBY{% endblock %}
{% block description %}Intelligent OBS configuration powered by AI. Automatic hardware detection, optimized streaming settings, and professional setup in minutes.{% endblock %}

{% block extra_css %}
    <link rel="stylesheet" href="{% static 'css/fuzeobs.css' %}">
    <link rel="stylesheet" href="{% static 'css/isometric-layers.css' %}">
{% endblock %}

{% block background %}
    {% include 'MAIN/base_background.html' %}
{% endblock %}

{% block content %}
<main style="position: relative; z-index: 4;">
    <!-- Hero Section -->
    <section class="cubes-hero">
        <div class="cubes-container" id="cubes-container"></div>
        <div class="cubes-overlay">
            <h1 class="fuzeobs-title">FUZEOBS</h1>
            <p class="fuzeobs-subtitle">Streaming Toolkit | Auto-Config | Custom Widgets | AI Assistant</p>
        </div>
    </section>

    <!-- Download Section -->
    <section class="download-section">
        <div class="container">
            <h2>Build Your Perfect Stream</h2>
            <p class="tagline">
                Automatic hardware detection. AI-powered optimization.<br>
                Professional streaming setup in minutes.
            </p>
            
            <div class="platform-downloads">
                <a href="{% url 'FUZEOBS:download_windows' %}" class="platform-card platform-windows">
                    <div class="platform-icon">
                        <svg width="28" height="28" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M0 3.449L9.75 2.1v9.451H0m10.949-9.602L24 0v11.4H10.949M0 12.6h9.75v9.451L0 20.699M10.949 12.6H24V24l-12.9-1.801"/>
                        </svg>
                    </div>
                    <div class="platform-info">
                        <span class="platform-name">Windows</span>
                        <span class="platform-version">v{{ fuzeobs_version }} • 64-bit</span>
                    </div>
                    <div class="platform-action">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                            <polyline points="7 10 12 15 17 10"/>
                            <line x1="12" y1="15" x2="12" y2="3"/>
                        </svg>
                    </div>
                </a>
                
                <a href="{% url 'FUZEOBS:download_windows' %}" class="platform-card platform-mac">
                    <div class="platform-icon">
                        <svg width="35" height="35" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z"/>
                        </svg>
                    </div>
                    <div class="platform-info">
                        <span class="platform-name">macOS</span>
                        <span class="platform-version">v{{ fuzeobs_version }}</span>
                    </div>
                    <div class="platform-action">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                            <polyline points="7 10 12 15 17 10"/>
                            <line x1="12" y1="15" x2="12" y2="3"/>
                        </svg>
                    </div>
                </a>
                
                <a href="{% url 'FUZEOBS:download_windows' %}" class="platform-card platform-linux">
                    <div class="platform-icon">
                        <svg width="50" height="50" viewBox="0 0 32 32" fill="currentColor">
                            <path d="M11.3063 21.91C11.181 21.7232 11.0714 21.4713 10.9824 21.1699C9.37571 19.358 10.6169 16.6916 11.8446 14.881C11.9623 14.6874 12.0905 14.5004 12.2299 14.3215C13.1666 13.1577 13.4089 12.3478 13.481 11.2521C13.4896 11.0481 13.4727 10.7781 13.4533 10.4678C13.3542 8.8837 13.1895 6.25174 16.0159 6.0184C19.5489 5.72669 19.2611 8.97105 19.235 10.8732C19.2339 10.9519 19.2328 11.0285 19.2321 11.1024C19.2225 12.249 19.8209 13.0341 20.4455 13.8535C20.6736 14.1528 20.9052 14.4566 21.112 14.7843C21.1181 14.794 21.1242 14.8038 21.1303 14.8135C22.2218 16.3877 23.2994 18.737 21.7995 20.9653C21.5887 21.7259 21.2695 22.424 20.8434 22.9921C19.3136 25.0052 17.9539 24.8008 16.892 24.6412C16.5717 24.5931 16.2785 24.549 16.0159 24.5711C15.5797 24.5977 15.2301 24.6682 14.9281 24.7292C13.7608 24.9648 13.3046 25.0569 11.3063 21.91Z"/>
                            <path d="M18.0139 7.79452C17.9811 8.72691 16.9921 9.53681 15.8065 9.61167C14.6209 9.68654 13.6907 8.97873 13.7235 8.04633C13.7562 7.11393 14.7453 6.30404 15.9309 6.22917C17.1165 6.16112 18.0466 6.86212 18.0139 7.79452Z" fill-opacity="0.3"/>
                            <path d="M11.6936 15.2947C12.3356 14.2807 13.6914 12.7221 11.9491 15.5125C10.5342 17.8129 11.4251 19.2898 11.8836 19.6981C13.2067 20.9232 13.1543 21.7467 12.1128 21.1001C9.87922 19.7185 10.3443 17.3909 11.6936 15.2947Z" fill-opacity="0.5"/>
                            <path d="M20.9881 15.71C20.4314 14.519 18.6628 11.4972 21.0733 15.009C23.2676 18.1873 21.7283 20.3992 21.4532 20.617C21.1781 20.8348 20.2545 21.2771 20.5231 20.5081C20.7982 19.739 22.1606 18.2826 20.9881 15.71Z" fill-opacity="0.5"/>
                            <path d="M11.2089 25.1021C9.74165 24.2922 7.61283 25.2586 8.38575 23.0671C8.54296 22.5703 8.15649 21.8217 8.4054 21.3384C8.70016 20.7463 9.33553 20.8756 9.71544 20.4809C10.0888 20.0726 10.3246 19.3648 11.0255 19.4736C11.7198 19.5825 12.1849 20.4673 12.6696 21.5562C13.0299 22.3321 14.3006 23.4278 14.2154 24.299C14.1106 25.6329 12.6499 25.8847 11.2089 25.1021Z"/>
                            <path d="M21.3814 24.7278C22.4556 23.3735 24.8464 23.6525 23.2351 21.7945C22.8945 21.393 22.9993 20.5354 22.5801 20.1679C22.0888 19.7187 21.5451 20.0862 21.0473 19.8548C20.5495 19.603 20.0255 19.1198 19.4163 19.4601C18.8071 19.8072 18.7416 20.7056 18.6827 21.8898C18.6303 22.7405 17.8836 24.1629 18.2831 24.9456C18.8596 26.157 20.3596 25.9937 21.3814 24.7278Z"/>
                        </svg>
                    </div>
                    <div class="platform-info">
                        <span class="platform-name">Linux</span>
                        <span class="platform-version">v{{ fuzeobs_version }}</span>
                    </div>
                    <div class="platform-action">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                            <polyline points="7 10 12 15 17 10"/>
                            <line x1="12" y1="15" x2="12" y2="3"/>
                        </svg>
                    </div>
                </a>
            </div>

            <a href="{% url 'FUZEOBS:install_guide' %}" class="install-help-card">
                <div class="install-help-icon">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#00c853" stroke-width="2"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/><polyline points="9 12 11 14 15 10" stroke="#00c853" stroke-width="2"/></svg>
                </div>
                <div class="install-help-text">
                    <span class="install-help-title">Verified safe &bull; Installation guide</span>
                    <span class="install-help-sub">Scanned by 70+ antivirus engines &bull; OS-specific setup instructions</span>
                </div>
                <svg class="install-help-arrow" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="9 18 15 12 9 6"/></svg>
            </a>
            
            <div class="hero-stats">
                <div class="stat-item">
                    <div class="stat-number">5 min</div>
                    <div class="stat-label">Setup time</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">100%</div>
                    <div class="stat-label">Free to start</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">AI</div>
                    <div class="stat-label">Integrated</div>
                </div>
            </div>
        </div>
    </section>

    <!-- Reviews Section -->
    <section class="reviews-section">
        <div class="container">
            <div class="section-header" style="text-align: center; margin-bottom: 60px;">
                <span class="section-label">REVIEWS</span>
                <h2 style="font-size: clamp(28px, 4vw, 42px); font-weight: 700; margin-top: 12px;">What Content Creators Are Saying</h2>
            </div>
            
            {% if featured_reviews %}
            <div class="reviews-carousel-wrapper">
                <div class="reviews-carousel" id="reviewsCarousel">
                    {% for review in featured_reviews %}
                    <div class="review-card" data-full-review="{{ review.review|escapejs }}" data-username="{{ review.user.username }}" data-rating="{{ review.rating }}" data-platform="{{ review.platform }}" {% if review.user.profile_picture %}data-avatar="{{ review.user.profile_picture.url }}"{% endif %}>
                        <div class="review-card-header">
                            {% if review.user.profile_picture %}
                            <img src="{{ review.user.profile_picture.url }}" class="review-card-avatar" alt="{{ review.user.username }}">
                            {% else %}
                            <div class="review-card-avatar-placeholder">{{ review.user.username|slice:":1"|upper }}</div>
                            {% endif %}
                            <div class="review-card-info">
                                <span class="review-card-name">{{ review.user.username }}</span>
                                <span class="review-card-separator"></span>
                                <div class="review-card-platform platform-{{ review.platform }}">
                                    {% if review.platform == 'twitch' %}
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M11.571 4.714h1.715v5.143H11.57zm4.715 0H18v5.143h-1.714zM6 0L1.714 4.286v15.428h5.143V24l4.286-4.286h3.428L22.286 12V0zm14.571 11.143l-3.428 3.428h-3.429l-3 3v-3H6.857V1.714h13.714Z"/></svg>
                                    {% elif review.platform == 'youtube' %}
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/></svg>
                                    {% elif review.platform == 'kick' %}
                                    <svg width="20" height="20" viewBox="0 0 512 512" fill="currentColor"><path d="M37 .036h164.448v113.621h54.71v-56.82h54.731V.036h164.448v170.777h-54.73v56.82h-54.711v56.8h54.71v56.82h54.73V512.03H310.89v-56.82h-54.73v-56.8h-54.711v113.62H37V.036z"/></svg>
                                    {% elif review.platform == 'tiktok' %}
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-1.43.08-2.86-.31-4.08-1.03-2.02-1.19-3.44-3.37-3.65-5.71-.02-.5-.03-1-.01-1.49.18-1.9 1.12-3.72 2.58-4.96 1.66-1.44 3.98-2.13 6.15-1.72.02 1.48-.04 2.96-.04 4.44-.99-.32-2.15-.23-3.02.37-.63.41-1.11 1.04-1.36 1.75-.21.51-.15 1.07-.14 1.61.24 1.64 1.82 3.02 3.5 2.87 1.12-.01 2.19-.66 2.77-1.61.19-.33.4-.67.41-1.06.1-1.79.06-3.57.07-5.36.01-4.03-.01-8.05.02-12.07z"/></svg>
                                    {% elif review.platform == 'facebook' %}
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>
                                    {% else %}
                                    <img src="https://api.iconify.design/lucide:globe.svg?color=%23ffffff&width=2.5" width="22" height="22" alt="Other" style="display:block">
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                        <div class="review-card-stars">
                            {% for i in "12345" %}
                            <span class="star {% if forloop.counter <= review.rating %}filled{% endif %}">&#9733;</span>
                            {% endfor %}
                        </div>
                        <p class="review-card-text">{{ review.review|truncatechars:80 }}</p>
                        {% if review.review|length > 80 %}
                        <span class="review-read-more">Read more</span>
                        {% endif %}
                    </div>
                    {% endfor %}
                </div>
            </div>
            {% else %}
            <p style="text-align: center; color: rgba(255,255,255,0.5);">No reviews yet</p>
            {% endif %}
        </div>
    </section>

    <!-- Review Modal -->
    <div id="reviewModal" class="review-modal-overlay" style="display: none;">
        <div class="review-modal-content">
            <button class="review-modal-close" id="reviewModalClose">&times;</button>
            <div class="review-modal-header">
                <a class="review-modal-avatar" id="reviewModalAvatar" href="#" target="_blank"></a>
                <div class="review-modal-info">
                    <a class="review-modal-name" id="reviewModalName" href="#" target="_blank"></a>
                    <span class="review-modal-separator"></span>
                    <div class="review-modal-platform" id="reviewModalPlatform"></div>
                </div>
            </div>
            <div class="review-modal-stars" id="reviewModalStars"></div>
            <p class="review-modal-text" id="reviewModalText"></p>
        </div>
    </div>

    <!-- Platform Support -->
    <section class="platforms-section">
        <div class="container">
            <div class="section-header">
                <span class="section-label">MULTISTREAM READY</span>
                <h2 class="section-title">Stream anywhere</h2>
                <p class="section-subtitle">Top Supported Platforms</p>
            </div>
            <div class="platforms-grid">
                <div class="platform-logo" data-platform="twitch">
                    <svg width="40" height="40" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M11.571 4.714h1.715v5.143H11.57zm4.715 0H18v5.143h-1.714zM6 0L1.714 4.286v15.428h5.143V24l4.286-4.286h3.428L22.286 12V0zm14.571 11.143l-3.428 3.428h-3.429l-3 3v-3H6.857V1.714h13.714Z"/>
                    </svg>
                    <span>Twitch</span>
                </div>
                <div class="platform-logo" data-platform="youtube">
                    <svg width="40" height="40" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/>
                    </svg>
                    <span>YouTube</span>
                </div>
                <div class="platform-logo" data-platform="kick">
                    <svg width="40" height="40" viewBox="0 0 512 512" fill="currentColor">
                        <path d="M37 .036h164.448v113.621h54.71v-56.82h54.731V.036h164.448v170.777h-54.73v56.82h-54.711v56.8h54.71v56.82h54.73V512.03H310.89v-56.82h-54.73v-56.8h-54.711v113.62H37V.036z"/>
                    </svg>
                    <span>Kick</span>
                </div>
                <div class="platform-logo" data-platform="tiktok">
                    <svg width="40" height="40" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-1.43.08-2.86-.31-4.08-1.03-2.02-1.19-3.44-3.37-3.65-5.71-.02-.5-.03-1-.01-1.49.18-1.9 1.12-3.72 2.58-4.96 1.66-1.44 3.98-2.13 6.15-1.72.02 1.48-.04 2.96-.04 4.44-.99-.32-2.15-.23-3.02.37-.63.41-1.11 1.04-1.36 1.75-.21.51-.15 1.07-.14 1.61.24 1.64 1.82 3.02 3.5 2.87 1.12-.01 2.19-.66 2.77-1.61.19-.33.4-.67.41-1.06.1-1.79.06-3.57.07-5.36.01-4.03-.01-8.05.02-12.07z"/>
                    </svg>
                    <span>TikTok</span>
                </div>
                <div class="platform-logo" data-platform="facebook">
                    <svg width="40" height="40" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
                    </svg>
                    <span>Facebook</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Layers Showcase -->
    <section class="layers-showcase">
        <div class="container">
            <div class="section-header">
                <span class="section-label">10 POWERFUL TABS</span>
                <h2 class="section-title">Everything in one place</h2>
                <p class="section-subtitle">From hardware detection to AI assistance, FuzeOBS covers every aspect of your streaming setup.</p>
            </div>
            
            <div class="layers-showcase-layout">
                <div class="layers-accordion">
                    <div class="accordion-item active" data-layer="0">
                        <div class="accordion-header">
                            <div class="accordion-title">
                                <h3 class="accordion-heading">Deployment</h3>
                                <span class="accordion-tabs-indicator">01 | 02 | 03</span>
                            </div>
                            <span class="accordion-toggle">−</span>
                        </div>
                        <div class="accordion-content">
                            <p class="accordion-desc">Analyze your system, generate optimized settings, configure and deploy them to OBS with one click. Automatically applied settings, scene setup, and more.</p>
                            <div class="accordion-tabs">
                                <span class="accordion-tab">Detection</span>
                                <span class="accordion-tab">Configuration</span>
                                <span class="accordion-tab">Optimization</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="accordion-item" data-layer="1">
                        <div class="accordion-header">
                            <div class="accordion-title">
                                <h3 class="accordion-heading">Setup</h3>
                                <span class="accordion-tabs-indicator">04 | 05</span>
                            </div>
                            <span class="accordion-toggle">+</span>
                        </div>
                        <div class="accordion-content">
                            <p class="accordion-desc">Configure audio devices, understand scene templates, and set up your streaming environment. Professional blueprints ready to use.</p>
                            <div class="accordion-tabs">
                                <span class="accordion-tab">Audio</span>
                                <span class="accordion-tab">Scenes</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="accordion-item" data-layer="2">
                        <div class="accordion-header">
                            <div class="accordion-title">
                                <h3 class="accordion-heading">Extras</h3>
                                <span class="accordion-tabs-indicator">06 | 07 | 08</span>
                            </div>
                            <span class="accordion-toggle">+</span>
                        </div>
                        <div class="accordion-content">
                            <p class="accordion-desc">Customize widgets, configure plugins, and browse comprehensive documentation. Everything to extend your streaming capabilities.</p>
                            <div class="accordion-tabs">
                                <span class="accordion-tab">Tools</span>
                                <span class="accordion-tab">Plugins</span>
                                <span class="accordion-tab">Documentation</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="accordion-item" data-layer="3">
                        <div class="accordion-header">
                            <div class="accordion-title">
                                <h3 class="accordion-heading">AI Enhancements</h3>
                                <span class="accordion-tabs-indicator">09 | 10</span>
                            </div>
                            <span class="accordion-toggle">+</span>
                        </div>
                        <div class="accordion-content">
                            <p class="accordion-desc">Real-time performance benchmarking with AI Analysis and AI-powered assistance for any support you require. Get intelligent recommendations, troubleshooting help, and CSS styling for widgets.</p>
                            <div class="accordion-tabs">
                                <span class="accordion-tab">Benchmark</span>
                                <span class="accordion-tab">Fuze-AI</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="layers-graphic">
                    <div id="iso-layers-container"></div>
                </div>
            </div>
        </div>
    </section>

    <!-- Features Grid -->
    <section class="features-section">
        <div class="container">
            <div class="section-header">
                <span class="section-label">FEATURES</span>
                <h2 class="section-title">Everything you need to stream</h2>
            </div>

            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></svg>
                    </div>
                    <h3>Hardware Detection</h3>
                    <p>Automatic CPU, GPU, RAM, and monitor detection to recommend the best custom-tailored settings</p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/></svg>
                    </div>
                    <h3>AI Optimization</h3>
                    <p>Machine learning algorithms generate perfect settings based on your specific hardware</p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="16 18 22 12 16 6"/><polyline points="8 6 2 12 8 18"/></svg>
                    </div>
                    <h3>One-Click Apply</h3>
                    <p>Instantly apply configurations to OBS Studio with automatic backup and safety checks</p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>
                    </div>
                    <h3>AI Assistant</h3>
                    <p>Powered by Anthropic for instant troubleshooting, optimization, benchmarking, and custom widgets</p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2"/><path d="M3 9h18M9 21V9"/></svg>
                    </div>
                    <h3>Scene Blueprints</h3>
                    <p>Pre-built layouts for gaming, IRL, podcasts, and more with automatic customization</p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 12h-4l-3 9L9 3l-3 9H2"/></svg>
                    </div>
                    <h3>Performance Ratings</h3>
                    <p>Real-time grades for streaming, recording, and gaming with upgrade recommendations provided by AI Analysis</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Widget Tools Section -->
    <section class="widgets-section">
        <div class="container">
            <div class="section-header">
                <span class="section-label">STREAM WIDGETS</span>
                <h2 class="section-title">Professional Widgets built-in</h2>
            </div>
            <div class="widgets-grid">
                <div class="widget-card">
                    <div class="widget-icon"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"/><path d="M13.73 21a2 2 0 0 1-3.46 0"/></svg></div>
                    <h4>Alerts</h4>
                    <p>Follow, sub, donation alerts</p>
                </div>
                <div class="widget-card">
                    <div class="widget-icon"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg></div>
                    <h4>Chat Box</h4>
                    <p>Customizable chat overlay</p>
                </div>
                <div class="widget-card">
                    <div class="widget-icon"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg></div>
                    <h4>Viewer Count</h4>
                    <p>Global live viewer display</p>
                </div>
                <div class="widget-card">
                    <div class="widget-icon"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"/><line x1="7" y1="7" x2="7.01" y2="7"/></svg></div>
                    <h4>Labels</h4>
                    <p>Latest follower, sub, etc...</p>
                </div>
                <div class="widget-card">
                    <div class="widget-icon"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="4" rx="1"/><rect x="3" y="10" width="18" height="4" rx="1"/><rect x="3" y="17" width="18" height="4" rx="1"/></svg></div>
                    <h4>Event List</h4>
                    <p>Stack Alerts Nicely</p>
                </div>
                <div class="widget-card">
                    <div class="widget-icon"><svg width="28" height="24" viewBox="0 0 28 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="1" y="6" width="26" height="12" rx="2"/><rect x="3" y="9" width="12" height="6" fill="currentColor" stroke="none"/></svg></div>
                    <h4>Goal Bar</h4>
                    <p>View, Track, and hit Goals</p>
                </div>
                <div class="widget-card">
                    <div class="widget-icon"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="1" x2="12" y2="23"/><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/></svg></div>
                    <h4>Donations</h4>
                    <p>Earn while you Stream</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Workflow Section -->
    <section class="workflow-section">
        <div class="container">
            <div class="section-header">
                <span class="section-label">HOW IT WORKS</span>
                <h2 class="section-title">Get streaming in 3 simple steps</h2>
            </div>

            <div class="workflow-grid">
                <div class="workflow-step">
                    <div class="step-number">01</div>
                    <h3>Scan System</h3>
                    <p>Click scan to automatically detect your CPU, GPU, RAM, monitors, and available encoders</p>
                </div>
                <div class="workflow-arrow">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
                </div>
                <div class="workflow-step">
                    <div class="step-number">02</div>
                    <h3>Configure</h3>
                    <p>Select your streaming platform and goals, then generate optimal settings</p>
                </div>
                <div class="workflow-arrow">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
                </div>
                <div class="workflow-step">
                    <div class="step-number">03</div>
                    <h3>Apply</h3>
                    <p>One-click apply to OBS Studio and start streaming with professional quality</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Pricing Section -->
    <section class="pricing-section">
        <div class="container">
            <div class="section-header">
                <span class="section-label">PRICING</span>
                <h2 class="section-title">Choose your tier</h2>
            </div>
            <div class="pricing-grid">
                <div class="pricing-card">
                    <div class="pricing-header">
                        <h3>Free</h3>
                        <div class="pricing-price">$0</div>
                        <span class="pricing-period">forever</span>
                    </div>
                    <ul class="pricing-features">
                        <li class="included"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>System Detection</li>
                        <li class="included"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>Standard Configuration</li>
                        <li class="included"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>Basic Optimization</li>
                        <li class="included"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>Standard Deployment</li>
                        <li class="included"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>AI Assistance (5/day)</li>
                        <li class="excluded"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>Advanced Setup</li>
                        <li class="excluded"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>Detailed Scenes Blueprints</li>
                        <li class="excluded"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>Benchmarking</li>
                    </ul>
                </div>
                
                <div class="pricing-card pricing-featured">
                    <div class="pricing-badge">POPULAR</div>
                    <div class="pricing-header">
                        <h3>Pro</h3>
                        <div class="pricing-price">$7.50</div>
                        <span class="pricing-period">/month</span>
                    </div>
                    <ul class="pricing-features">
                        <li class="included highlight"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>Advanced Setup Generation</li>
                        <li class="included highlight"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>Detailed Scene Blueprints</li>
                        <li class="included highlight"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>Real-Time Benchmarking</li>
                        <li class="included highlight"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>3 Profile Slots</li>
                        <li class="included highlight"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>Most Intelligent AI Model</li>
                        <li class="included highlight"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>Unlimited AI Assistance</li>
                        <li class="included highlight"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>Priority Support</li>
                    </ul>
                    <p class="pricing-3month-note" style="text-align:center;font-size:0.8rem;color:rgba(255,255,255,0.5); margin: 15px 0 0 0;"><i class="fas fa-tag" style="color:#00c853;margin-right:4px;"></i> Or get 3 months for $20 &mdash; save $2.50</p>
                </div>
                
                <div class="pricing-card">
                    <div class="pricing-header">
                        <h3>Lifetime</h3>
                        <div class="pricing-price">$45</div>
                        <span class="pricing-period">one-time</span>
                    </div>
                    <ul class="pricing-features">
                        <li class="included highlight"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>Everything in Pro</li>
                        <li class="included highlight"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>Lifetime Access</li>
                        <li class="included highlight"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>5 Profile Slots</li>
                        <li class="included highlight"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>Most Intelligent AI Model</li>
                        <li class="included highlight"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>Unlimited AI Assistance</li>
                        <li class="included highlight"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>Priority Support</li>
                        <li class="included highlight"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>No Recurring Fees</li>
                    </ul>
                </div>
            </div>
            <div class="pricing-cta">
                <a href="{% url 'FUZEOBS:pricing' %}" class="btn btn-outline">See Full Pricing</a>
            </div>
        </div>
    </section>

    <!-- Video Tutorial Section -->
    <section class="video-section">
        <div class="container">
            <div class="section-header">
                <span class="section-label">SEE IT IN ACTION</span>
                <h2 class="section-title">Watch the full walkthrough</h2>
                <p class="section-subtitle">A complete tour of every feature in FuzeOBS</p>
            </div>
            <div class="video-container">
                <iframe 
                    src="https://www.youtube.com/embed/VIDEO_ID" 
                    title="FuzeOBS Tutorial"
                    frameborder="0" 
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                    allowfullscreen>
                </iframe>
            </div>
        </div>
    </section>

    <!-- Custom CTA -->
    <section class="custom-cta">
        <div class="container">
            <h3>Need More of a Personal Touch?</h3>
            <p>Professional configuration services available for advanced requirements</p>
            <a href="{% url 'STORE:store' %}" class="btn btn-outline">Take A Look</a>
        </div>
    </section>
</main>

<!-- Load GSAP first -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
<script>
if (typeof gsap === 'undefined') {
    console.error('GSAP failed to load from CDN');
}
</script>
<script src="{% static 'js/Cubes.js' %}"></script>
<script src="{% static 'js/IsometricLayers.js' %}"></script>
<script>
(function() {
    function init() {
        console.log('FuzeOBS init starting...');
        
        // Initialize Cubes Hero
        var container = document.getElementById('cubes-container');
        if (container && typeof CubesAnimation !== 'undefined' && typeof gsap !== 'undefined') {
            var gridSize = window.innerWidth < 480 ? 8 : (window.innerWidth < 768 ? 10 : 14);
            try {
                new CubesAnimation(container, {
                    gridSize: gridSize,
                    maxAngle: 45,
                    radius: 3,
                    borderStyle: '1px dashed rgba(255, 255, 255, 0.7)',
                    faceColor: '#000',
                    rippleColor: 'rgba(255, 255, 255, 0.9)',
                    rippleSpeed: 2.5,
                    autoAnimate: true,
                    rippleOnClick: true
                });
            } catch(e) {
                console.error('CubesAnimation error:', e);
            }
        }
        
        // Initialize Isometric Layers
        var isoContainer = document.getElementById('iso-layers-container');
        var isoLayers = null;
        
        if (isoContainer && typeof IsometricLayers !== 'undefined') {
            isoLayers = new IsometricLayers(isoContainer, {
                initialLayer: 0,
                layers: [
                    { id: 'deployment', label: 'DEPLOYMENT', sideLabel: 'CORE', number: '01 | 02 | 03' },
                    { id: 'setup', label: 'SETUP', sideLabel: 'CUSTOMIZE', number: '04 | 05' },
                    { id: 'extras', label: 'EXTRAS', sideLabel: 'EXTEND', number: '06 | 07 | 08' },
                    { id: 'ai', label: 'AI ENHANCEMENTS', sideLabel: 'INTELLIGENT', number: '09 | 10' }
                ]
            });
        }
        
        // Accordion functionality
        var accordionItems = document.querySelectorAll('.accordion-item');
        
        accordionItems.forEach(function(item) {
            var header = item.querySelector('.accordion-header');
            
            header.addEventListener('click', function() {
                var layerIndex = parseInt(item.dataset.layer);
                
                // Close all items
                accordionItems.forEach(function(other) {
                    other.classList.remove('active');
                    other.querySelector('.accordion-toggle').textContent = '+';
                });
                
                // Open clicked item
                item.classList.add('active');
                item.querySelector('.accordion-toggle').textContent = '−';
                
                // Highlight layer immediately, move after accordion animation
                if (isoLayers) {
                    isoLayers.highlightActive(layerIndex);
                    setTimeout(function() {
                        isoLayers.moveToActive(layerIndex);
                    }, 400);
                }
            });
        });
        
        // Listen for layer changes from graphic clicks
        if (isoContainer) {
            isoContainer.addEventListener('layerchange', function(e) {
                var idx = e.detail.index;
                
                accordionItems.forEach(function(item) {
                    if (parseInt(item.dataset.layer) === idx) {
                        item.classList.add('active');
                        item.querySelector('.accordion-toggle').textContent = '−';
                    } else {
                        item.classList.remove('active');
                        item.querySelector('.accordion-toggle').textContent = '+';
                    }
                });
            });
        }
    }
    
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', init);
    } else {
        init();
    }
})();

// Reviews Carousel - dynamically clone to fill screen, consistent speed
(function() {
    const carousel = document.getElementById('reviewsCarousel');
    if (!carousel || carousel.children.length === 0) return;

    const gap = 24;
    const items = Array.from(carousel.children);
    const cardWidth = 320 + gap; // card width + gap
    const setWidth = items.length * cardWidth;
    const viewportWidth = window.innerWidth;

    // Clone enough sets so one full set can scroll off while remaining cards fill the screen
    const setsNeeded = Math.max(2, Math.ceil((viewportWidth * 2) / setWidth) + 1);
    for (let s = 1; s < setsNeeded; s++) {
        items.forEach(item => carousel.appendChild(item.cloneNode(true)));
    }

    // Scroll distance = one set of originals (in px), convert to % of total width
    const totalWidth = setsNeeded * setWidth;
    const scrollPct = (setWidth / totalWidth) * 100;
    // Speed: faster on mobile since fewer cards make slow feel sluggish
    const speed = viewportWidth < 768 ? 80 : 50;
    const duration = setWidth / speed;

    carousel.style.setProperty('--scroll-distance', '-' + scrollPct + '%');
    carousel.style.setProperty('--scroll-duration', duration + 's');
    carousel.classList.add('scrolling');
})();

// Review Modal
(function() {
    const modal = document.getElementById('reviewModal');
    const closeBtn = document.getElementById('reviewModalClose');
    if (!modal) return;
    
    const platformIcons = {
        twitch: '<svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M11.571 4.714h1.715v5.143H11.57zm4.715 0H18v5.143h-1.714zM6 0L1.714 4.286v15.428h5.143V24l4.286-4.286h3.428L22.286 12V0zm14.571 11.143l-3.428 3.428h-3.429l-3 3v-3H6.857V1.714h13.714Z"/></svg>',
        youtube: '<svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/></svg>',
        kick: '<svg width="20" height="20" viewBox="0 0 512 512" fill="currentColor"><path d="M37 .036h164.448v113.621h54.71v-56.82h54.731V.036h164.448v170.777h-54.73v56.82h-54.711v56.8h54.71v56.82h54.73V512.03H310.89v-56.82h-54.73v-56.8h-54.711v113.62H37V.036z"/></svg>',
        tiktok: '<svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-1.43.08-2.86-.31-4.08-1.03-2.02-1.19-3.44-3.37-3.65-5.71-.02-.5-.03-1-.01-1.49.18-1.9 1.12-3.72 2.58-4.96 1.66-1.44 3.98-2.13 6.15-1.72.02 1.48-.04 2.96-.04 4.44-.99-.32-2.15-.23-3.02.37-.63.41-1.11 1.04-1.36 1.75-.21.51-.15 1.07-.14 1.61.24 1.64 1.82 3.02 3.5 2.87 1.12-.01 2.19-.66 2.77-1.61.19-.33.4-.67.41-1.06.1-1.79.06-3.57.07-5.36.01-4.03-.01-8.05.02-12.07z"/></svg>',
        facebook: '<svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>',
        other: '<img src="https://api.iconify.design/lucide:globe.svg?color=%23ffffff&width=2.5" width="22" height="22" alt="Other" style="display:block">'
    };
    
    function openReviewModal(card) {
        const fullReview = card.dataset.fullReview;
        const username = card.dataset.username;
        const rating = parseInt(card.dataset.rating);
        const platform = card.dataset.platform;
        const avatar = card.dataset.avatar;
        
        // Set avatar
        const avatarEl = document.getElementById('reviewModalAvatar');
        const profileUrl = '/accounts/profile/' + username + '/';
        avatarEl.href = profileUrl;
        if (avatar) {
            avatarEl.innerHTML = '<img src="' + avatar + '" alt="">';
        } else {
            avatarEl.innerHTML = '<span>' + username.charAt(0).toUpperCase() + '</span>';
        }
        
        // Set name and platform icon
        const nameEl = document.getElementById('reviewModalName');
        nameEl.textContent = username;
        nameEl.href = profileUrl;
        const platformEl = document.getElementById('reviewModalPlatform');
        platformEl.className = 'review-modal-platform platform-' + platform;
        platformEl.innerHTML = platformIcons[platform] || platformIcons.other;
        
        // Set stars
        let starsHtml = '';
        for (let i = 1; i <= 5; i++) {
            starsHtml += '<span class="star ' + (i <= rating ? 'filled' : '') + '">&#9733;</span>';
        }
        document.getElementById('reviewModalStars').innerHTML = starsHtml;
        
        // Set text
        document.getElementById('reviewModalText').textContent = fullReview;
        
        modal.style.display = 'flex';
    }
    
    // Click handlers for read more and cards
    document.querySelectorAll('.review-card').forEach(card => {
        const readMore = card.querySelector('.review-read-more');
        if (readMore) {
            readMore.addEventListener('click', (e) => {
                e.stopPropagation();
                openReviewModal(card);
            });
        }
        card.addEventListener('click', () => openReviewModal(card));
    });
    
    closeBtn.addEventListener('click', () => modal.style.display = 'none');
    modal.addEventListener('click', (e) => {
        if (e.target === modal) modal.style.display = 'none';
    });
})();
</script>
{% endblock %}