{% extends 'MAIN/base.html' %}
{% load static %}

{% block extra_css %}
    <link rel="stylesheet" href="{% static 'css/product_management.css' %}">
{% endblock %}

{% block background %}
    {% include 'MAIN/base_background.html' %}
{% endblock %}

{% block content %}
<div class="profile-container">
    <div class="profile-header">
        <h1 class="user_management-title">Edit Stream Asset</h1>
    </div>
    
    <!-- Messages -->
    {% if messages %}
    <div class="messages">
        {% for message in messages %}
            <div class="message {% if message.tags %}{{ message.tags }}{% endif %}">
                {{ message }}
            </div>
        {% endfor %}
    </div>
    {% endif %}
    
    <div class="profile-section">
        <form method="post" enctype="multipart/form-data" class="admin-form">
            {% csrf_token %}
            
            <div class="form-group">
                <label for="name">Asset Name</label>
                <input type="text" id="name" name="name" value="{{ asset.name }}" required class="form-control">
            </div>
            
            <div class="form-group">
                <label for="description">Description</label>
                <textarea id="description" name="description" rows="5" class="form-control">{{ asset.description }}</textarea>
            </div>
            
            <div class="form-group">
                <label for="file_path">File Path</label>
                <input type="text" id="file_path" name="file_path" value="{{ asset.file_path }}" readonly class="form-control">
                <small>File path cannot be changed. To update the file, delete this asset and create a new one.</small>
            </div>
            
            <div class="form-group">
                <label for="thumbnail">Update Thumbnail Image</label>
                <input type="file" id="thumbnail" name="thumbnail" class="form-control">
                <small>Leave empty to keep current thumbnail</small>
                
                {% if asset.thumbnail %}
                <div class="current-thumbnail">
                    <p>Current thumbnail:</p>
                    <img src="{{ asset.thumbnail.url }}" alt="{{ asset.name }}" style="max-width: 200px; max-height: 200px; margin-top: 10px;">
                </div>
                {% endif %}
            </div>
            
            <div class="form-group">
                <label class="checkbox-container">
                    <input type="checkbox" name="is_active" value="true" {% if asset.is_active %}checked{% endif %}>
                    <span class="checkbox-label">Active</span>
                </label>
                <small>Make this asset available to users</small>
            </div>
            
            <div class="form-actions">
                <a href="{% url 'STORE:stream_asset_management' %}" class="action-button cancel">Cancel</a>
                <button type="submit" class="action-button">Save Changes</button>
            </div>
        </form>
    </div>
</div>
{% endblock %}